const orb = document.getElementById("orb");
const card = document.getElementById("card");
const text = document.getElementById("text");

// —É—Ç–∏–ª–∏—Ç–∞
function rand(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

// —Å–æ—Ä–Ω—è–∫–∏ —Å–ª–æ–≤ –≥–∞–Ω–≤–µ—Å—Ç–∞
const weeds = [" –ø—ç–ø—ç", " —à–Ω–µ–π–Ω–µ", "", "", " –ø—ç–ø—ç", ""];

// –ø–µ—Ä—Å–æ–Ω–∞–∂–∏
const characters = [
  {
    name: "–ì–∞–Ω–≤–µ—Å—Ç",
    phrases: [
      "–°–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å –ø–æ–π–¥—ë—Ç –ø–æ –∫–∞–π—Ñ—É",
      "–î–µ–ª–∞–π –¥–≤–∏–∂–µ–Ω–∏–µ –∏ –Ω–µ —Ç—É–ø–∏",
      "–§–æ–∫—É—Å –Ω–∞ –±–∞–±–∫–∏ –∏ —Å—Ç–∏–ª—å",
      "–¢—ã –Ω–∞ –≤–æ–ª–Ω–µ, –ø—Ä–æ—Å—Ç–æ –ª–æ–≤–∏",
      "–ù–µ —Å—Å—ã, —Ç—ã –≥–ª–∞–≤–Ω—ã–π",
      "–í—Å–µ —Å–º–æ—Ç—Ä—è—Ç, –Ω–æ –Ω–µ –≤—Å–µ –ø–æ–Ω–∏–º–∞—é—Ç",
      "–†–µ–∂–∏–º –≤–∫–ª—é—á—ë–Ω, –Ω–∞–∑–∞–¥ –Ω–µ–ª—å–∑—è",
      "–¢—ã —É–∂–µ –≤ –∏–≥—Ä–µ",
      "–î–µ–Ω—å –∂–∏—Ä–Ω—ã–π, —á—É–≤—Å—Ç–≤—É—é",
      "–ë—É–¥—å –¥–µ—Ä–∑–∫–∏–º, –Ω–æ —Å –≥–æ–ª–æ–≤–æ–π"
    ],
    weedChance: 0.7
  },
  {
    name: "–ü—ç–ø—ç –±–æ–≥–∞—Ç—ã–π",
    phrases: [
      "–î–µ–Ω—å–≥–∏ –ª—é–±—è—Ç —Ç–∏—à–∏–Ω—É",
      "–°–µ–≥–æ–¥–Ω—è –ø—Ä–æ—Ñ–∏—Ç —Å–∞–º –∏–¥—ë—Ç",
      "–õ—è–≥—É—à–∫–∞ –≤–∏–¥–∏—Ç —à–∞–Ω—Å ‚Äî –ª—è–≥—É—à–∫–∞ –±–µ—Ä—ë—Ç",
      "–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π –≤ —Å–µ–±—è",
      "–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ = –∫–∞–ø–∏—Ç–∞–ª",
      "–¢—ã —Å—á–∏—Ç–∞–µ—à—å —Ö–æ–¥—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ",
      "–†–æ—Å—Ç –º–µ–¥–ª–µ–Ω–Ω—ã–π, –Ω–æ –≤–µ—Ä–Ω—ã–π",
      "–ë–æ–≥–∞—Ç—Å—Ç–≤–æ ‚Äî —ç—Ç–æ —Ä–µ–∂–∏–º",
      "–ù–µ —Å—É–µ—Ç–∏—Å—å, –≤—Å—ë –∏–¥—ë—Ç",
      "–î–µ–Ω—å –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –ø–ª—é—Å"
    ],
    weedChance: 0
  },
  {
    name: "–ü—ç–ø—ç –±–µ–¥–Ω—ã–π",
    phrases: [
      "–ù—É —Ç–∞–∫–æ–µ‚Ä¶ –Ω–æ –±—ã–≤–∞–ª–æ —Ö—É–∂–µ",
      "–ñ–∏–≤—ë–º –∫–∞–∫ –º–æ–∂–µ–º",
      "–°–µ–≥–æ–¥–Ω—è –±–µ–∑ —Ä–µ–∑–∫–∏—Ö –¥–≤–∏–∂–µ–Ω–∏–π",
      "–≠—Ç–æ –æ–ø—ã—Ç, –Ω–µ –ø—Ä–æ–≤–∞–ª",
      "–î–µ–Ω—å –ø—Ä–æ—Å—Ç–æ –µ—Å—Ç—å",
      "–ú–æ–≥–ª–æ –±—ã—Ç—å —Ö—É–∂–µ",
      "–ù–æ—Ä–º–∞–ª—å–Ω–æ, –ø–µ—Ä–µ–∂–∏–≤—ë–º",
      "–ó–∞—Ç–æ –∂–∏–≤—ã",
      "–ú–µ–ª–æ—á—å, –∞ –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ",
      "–ù—É –ª–∞–¥–Ω–æ"
    ],
    weedChance: 0
  },
  {
    name: "–®–Ω–µ–π–Ω",
    phrases: [
      "–†–µ–∞–ª—å–Ω–æ—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è –ø–ª—ã–≤—ë—Ç",
      "–¢—ã —ç—Ç–æ –≤–∏–¥–µ–ª? –Ø –Ω–µ—Ç",
      "–î–µ–Ω—å —Å—Ç—Ä–∞–Ω–Ω—ã–π, –Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—Å—è",
      "–°–º—ã—Å–ª –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Ç–æ–º",
      "–í—Å—ë –Ω–µ–º–Ω–æ–≥–æ –Ω–µ —Ç–∞–∫",
      "–°–µ–≥–æ–¥–Ω—è –≤–æ–ø—Ä–æ—Å—ã –≤–∞–∂–Ω–µ–µ –æ—Ç–≤–µ—Ç–æ–≤",
      "–õ–æ–≥–∏–∫–∞ –æ—Ç–¥—ã—Ö–∞–µ—Ç",
      "–ü—É—Å—Ç—å –±—É–¥–µ—Ç –∫–∞–∫ –±—É–¥–µ—Ç",
      "–ù–µ –∏—â–∏ —Å–º—ã—Å–ª —Å–µ–π—á–∞—Å",
      "–û–Ω —Å–∞–º –Ω–∞–π–¥—ë—Ç —Ç–µ–±—è"
    ],
    weedChance: 0
  },
  {
    name: "–í–∞—Ç–∞—Ñ–∞",
    phrases: [
      "–ß–¢–û.",
      "–≠—Ç–æ –≤–æ–æ–±—â–µ –∑–∞–∫–æ–Ω–Ω–æ?",
      "–Ø –Ω–µ –ø–æ–Ω—è–ª, –Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ",
      "–ú–æ–∑–≥ –≤—ã—à–µ–ª",
      "–ß—Ç–æ —Å–µ–π—á–∞—Å –ø—Ä–æ–∏–∑–æ—à–ª–æ",
      "–ê —ç—Ç–æ —Ç–æ—á–Ω–æ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å?",
      "–°–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ",
      "–Ø –ø–∞—Å",
      "–õ–∞–¥–Ω–æ‚Ä¶",
      "–û–∫–µ–π???"
    ],
    weedChance: 0
  }
];

// –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ—Ä–∞–∑ –∑–∞ —Ä–∞–∑
function generatePrediction() {
  const char = rand(characters);
  const count = Math.random() < 0.5 ? 2 : 3;

  let used = [];
  let result = [];

  for (let i = 0; i < count; i++) {
    let phrase;
    do {
      phrase = rand(char.phrases);
    } while (used.includes(phrase));
    used.push(phrase);

    if (Math.random() < char.weedChance) {
      phrase += rand(weeds);
    }

    result.push(phrase);
  }

  return `üßø ${char.name}\n\n` + result.join("\n");
}

orb.addEventListener("click", () => {
  const prediction = generatePrediction();
  text.innerText = prediction;
  card.classList.remove("hidden");

  orb.style.transform = "scale(1.05)";
  setTimeout(() => {
    orb.style.transform = "scale(1)";
  }, 200);
});
